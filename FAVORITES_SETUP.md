# Система Избранного - Инструкция по настройке

## Установка зависимостей

Для корректной работы системы избранного необходимо установить AsyncStorage:

```bash
npm install @react-native-async-storage/async-storage
```

Или с Yarn:

```bash
yarn add @react-native-async-storage/async-storage
```

## Особенности реализации

### ✨ Что реализовано:

1. **Zustand Store с Persist** - автоматическое сохранение избранного в локальном хранилище
2. **Работает без авторизации** - избранное сохраняется локально на устройстве
3. **Анимированные иконки** - heart/heart-outline с плавной сменой цвета
4. **Бейдж в табе** - красный индикатор с количеством избранных ресторанов
5. **Обновленная страница избранного** - показывает реальные данные из store
6. **Удобный хук useFavorites** - упрощенный API для работы с избранным

### 🛠️ Компоненты:

- `stores/favoritesStore.ts` - Zustand store с persist
- `hooks/useFavorites.ts` - удобный хук для работы с избранным
- `components/ui/FavoritesTabIcon.tsx` - иконка таба с бейджем
- `app/(tabs)/favorites.tsx` - обновленная страница избранного
- `components/ui/RestaurantCard.tsx` - карточка с кнопкой избранного

### 📱 Как это работает:

1. **Добавление в избранное**: нажмите на иконку сердца в карточке ресторана
2. **Удаление**: повторное нажатие убирает из избранного
3. **Просмотр**: откройте таб "Избранное" для просмотра всех сохраненных ресторанов
4. **Персистентность**: избранное сохраняется между сессиями приложения

### 💾 Хранение данных:

- **React Native**: AsyncStorage (требует установки пакета)
- **Web/Fallback**: localStorage (автоматический fallback)
- **Формат**: JSON с метаданными (дата добавления, базовая информация о ресторане)

### 🎨 UX особенности:

- Иконка меняется с `heart-outline` на `heart` при добавлении
- Цвет иконки: серый → красный при добавлении в избранное
- Красный бейдж в табе показывает количество (до 99+)
- Плавные анимации при нажатии
- Предотвращение случайного открытия карточки при нажатии на сердце

### 🔄 API Store:

```typescript
const {
  favorites, // массив избранных ресторанов
  favoritesCount, // количество избранных
  isFavorite, // проверка статуса (restaurantId) => boolean
  toggleFavorite, // переключение статуса (restaurant) => void
  addToFavorites, // добавление (favoriteData) => void
  removeFromFavorites, // удаление (restaurantId) => void
} = useFavorites();
```

Система готова к использованию! 🎉
